(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{118:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a(24),c=a.n(n),s=(a(85),a(124)),i=a(4),o=a(131),l=a(123),d=a(80),j=a(13),u=a(8),b=a(14),p=a(0),h=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),a=t[0],n=t[1],c=Object(b.k)();return Object(p.jsx)("div",{children:Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a?c.push("/?keyword=".concat(a)):c.push(c.location.pathname)},className:"d-flex input-group w-auto m-3",children:[Object(p.jsx)("input",{type:"text",className:"form-control",placeholder:"Type query","aria-label":"Search",onChange:function(e){return n(e.target.value)}}),Object(p.jsx)("button",{className:"btn btn-outline-primary",type:"submit","data-mdb-ripple-color":"dark",children:"Search"})]})})},O=a(9),x=a.n(O),m=a(11),f="USER_LOGIN_REQUEST",g="USER_LOGIN_SUCCESS",y="USER_LOGIN_FAIL",v="USER_LOGOUT",S="USER_REGISTER_REQUEST",E="USER_REGISTER_SUCCESS",_="USER_REGISTER_FAIL",C="USER_PROFILE_REQUEST",N="USER_PROFILE_SUCCESS",I="USER_PROFILE_FAIL",R="USER_PROFILE_RESET",L="USER_UPDATE_PROFILE_REQUEST",k="USER_UPDATE_PROFILE_SUCCESS",D="USER_UPDATE_PROFILE_FAIL",T="USER_UPDATE_PROFILE_RESET",w="USER_LIST_REQUEST",P="USER_LIST_SUCCESS",U="USER_LIST_FAIL",A="USER_LIST_RESET",B="USER_DELETE_REQUEST",F="USER_DELETE_SUCCESS",G="USER_DELETE_FAIL",M="USER_DELETE_RESET",q="USER_DETAIL_BY_ID_REQUEST",Y="USER_DETAIL_BY_ID_SUCCESS",Q="USER_DETAIL_BY_ID_FAIL",$="USER_DETAIL_BY_ID_RESET",z="USER_UPDATE_BY_ID_REQUEST",V="USER_UPDATE_BY_ID_SUCCESS",J="USER_UPDATE_BY_ID_FAIL",H="USER_UPDATE_BY_ID_RESET",W="ORDER_CREATE_REQUEST",X="ORDER_CREATE_SUCCESS",K="ORDER_CREATE_FAIL",Z="ORDER_CREATE_RESET",ee="ORDER_DETAIL_REQUEST",te="ORDER_DETAIL_SUCCESS",ae="ORDER_DETAIL_FAIL",re="ORDER_DETAIL_RESET",ne="ORDER_PAY_REQUEST",ce="ORDER_PAY_SUCCESS",se="ORDER_PAY_FAIL",ie="ORDER_PAY_RESET",oe="ORDER_LIST_REQUEST",le="ORDER_LIST_SUCCESS",de="ORDER_LIST_FAIL",je="ORDER_LIST_RESET",ue="ORDER_LIST_ADMIN_REQUEST",be="ORDER_LIST_ADMIN_SUCCESS",pe="ORDER_LIST_ADMIN_FAIL",he="ORDER_LIST_ADMIN_RESET",Oe="ORDER_DELIVER_REQUEST",xe="ORDER_DELIVER_SUCCESS",me="ORDER_DELIVER_FAIL",fe="ORDER_DELIVER_RESET",ge=a(12),ye=a.n(ge),ve=function(){return function(){var e=Object(m.a)(x.a.mark((function e(t,a){var r,n,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:C}),r=a().userLogin.userInfo,e.next=5,ye.a.get("/api/users/profile",{headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(r.token)}});case 5:n=e.sent,c=n.data,t({type:N,payload:c}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:I,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()},Se=function(){var e=Object(i.c)((function(e){return e.cart.cart})),t=Object(i.c)((function(e){return e.userLogin.userInfo})),a=Object(i.b)();return Object(p.jsx)("header",{children:Object(p.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:Object(p.jsxs)("div",{className:"container-fluid",children:[Object(p.jsx)("button",{className:"navbar-toggler",type:"button","data-mdb-toggle":"collapse","data-mdb-target":"#navbarTogglerDemo03","aria-controls":"navbarTogglerDemo03","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(p.jsx)("i",{className:"fas fa-bars"})}),Object(p.jsx)("a",{className:"navbar-brand mx-3",href:"/",children:"Summer Shop"}),Object(p.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo03",children:[Object(p.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(j.LinkContainer,{to:"/",children:Object(p.jsx)(o.a.Link,{className:"mx-3",children:"HOME"})})}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(j.LinkContainer,{to:"/cart",children:Object(p.jsxs)(o.a.Link,{className:"mx-3",children:[Object(p.jsx)("span",{className:"cart-icon badge badge-pill bg-danger",children:e.reduce((function(e,t){return e+t.qty}),0)}),Object(p.jsx)("span",{children:Object(p.jsx)("i",{className:"cart-icon fas fa-shopping-cart"})})]})})}),Object(p.jsx)("li",{className:"nav-item",children:t?Object(p.jsxs)(l.a,{variant:"dark",className:"mx-3",id:"username",title:""!==t.first_name?t.first_name:t.username,children:[Object(p.jsx)(j.LinkContainer,{to:"/profile",children:Object(p.jsx)(d.a.Item,{children:"Profile"})}),Object(p.jsx)(d.a.Item,{onClick:function(){a((function(e){localStorage.removeItem("userInfo"),e({type:v}),e({type:R}),e({type:A}),e({type:re}),e({type:je})}))},children:"Sign Out"})]}):Object(p.jsx)(j.LinkContainer,{className:"mx-3",to:"/login",children:Object(p.jsx)(o.a.Link,{children:Object(p.jsx)("i",{className:"fas fa-user",children:" Login"})})})}),Object(p.jsx)("li",{children:t&&t.is_staff&&Object(p.jsxs)(l.a,{variant:"dark",className:"mx-3",id:"username",title:"Admin",children:[Object(p.jsx)(j.LinkContainer,{to:"/admin/users",children:Object(p.jsx)(d.a.Item,{children:"Manage Users"})}),Object(p.jsx)(j.LinkContainer,{to:"/admin/products",children:Object(p.jsx)(d.a.Item,{children:"Manage Products"})}),Object(p.jsx)(j.LinkContainer,{to:"/admin/orders",children:Object(p.jsx)(d.a.Item,{children:"Manage Orders"})})]})})]}),Object(p.jsx)(h,{})]})]})})})},Ee=a(125),_e=a(76),Ce=function(){return Object(p.jsx)("footer",{children:Object(p.jsx)(s.a,{children:Object(p.jsx)(Ee.a,{children:Object(p.jsx)(_e.a,{className:"text-center py-3",children:"Copyright \xa9 Summer Shop"})})})})},Ne=a(132),Ie=function(e){var t=e.value,a=e.text,r=e.color;return Object(p.jsxs)("div",{className:"rating",children:[Object(p.jsx)("span",{children:Object(p.jsx)("i",{style:{color:r},className:t>=1?"fas fa-star":t>=.5?"fas fa-star-half-alt":"far fa-star"})}),Object(p.jsx)("span",{children:Object(p.jsx)("i",{style:{color:r},className:t>=2?"fas fa-star":t>=1.5?"fas fa-star-half-alt":"far fa-star"})}),Object(p.jsx)("span",{children:Object(p.jsx)("i",{style:{color:r},className:t>=3?"fas fa-star":t>=2.5?"fas fa-star-half-alt":"far fa-star"})}),Object(p.jsx)("span",{children:Object(p.jsx)("i",{style:{color:r},className:t>=4?"fas fa-star":t>=3.5?"fas fa-star-half-alt":"far fa-star"})}),Object(p.jsx)("span",{children:Object(p.jsx)("i",{style:{color:r},className:5==t?"fas fa-star":t>=4.5?"fas fa-star-half-alt":"far fa-star"})}),Object(p.jsx)("span",{children:a})]})},Re=a(10),Le=[{_id:5,name:"Ambient Lighting Blush",image:"/static/images/blush.jpg"},{_id:6,name:"Luxury Eyeshadow Palette",image:"/static/images/eyeshadow.jpg"},{_id:7,name:"Double Wear Stay-in-Place Foundation",image:"/static/images/foundation.jpg"},{_id:8,name:"Shimmering Skin Perfector\xae Pressed Highlighter",image:"/static/images/highlighter.jpg"},{_id:9,name:"Monsieur Big Volumizing Mascara",image:"/static/images/mascara.jpg"},{_id:10,name:"Soft Matte Complete Concealer",image:"/static/images/concealer.jpg"},{_id:11,name:"Rouge Pur Couture Satin Lipstick",image:"/static/images/lipstick.jpg"}],ke=function(e){var t=e.product;return Object(p.jsxs)(Ne.a,{className:"my-3 p-3 rounded",children:[Object(p.jsx)(Re.Link,{to:"/product/".concat(t._id),children:Object(p.jsx)(Ne.a.Img,{src:Le[t._id-5].image})}),Object(p.jsxs)(Ne.a.Body,{children:[Object(p.jsx)(Re.Link,{to:"/product/".concat(t._id),children:Object(p.jsx)(Ne.a.Title,{className:"text-dark",as:"div",children:Object(p.jsx)("strong",{children:t.name})})}),Object(p.jsx)(Ne.a.Text,{className:"text-dark",as:"div",children:Object(p.jsx)("div",{className:"",children:Object(p.jsx)(Ie,{value:t.rating,text:"".concat(t.numReviews," reviews"),color:"#C39BD3"})})}),Object(p.jsxs)(Ne.a.Text,{className:"text-dark",as:"h3",children:["$",t.price]})]})]})},De="PRODUCTS_LIST_REQUEST",Te="PRODUCTS_LIST_SUCCESS",we="PRODUCTS_LIST_FAIL",Pe="PRODUCTS_LIST_RESET",Ue="PRODUCT_DETAILS_REQUEST",Ae="PRODUCT_DETAILS_SUCCESS",Be="PRODUCT_DETAILS_FAIL",Fe="PRODUCT_DETAILS_RESET",Ge="PRODUCT_DELETE_REQUEST",Me="PRODUCT_DELETE_SUCCESS",qe="PRODUCT_DELETE_FAIL",Ye="PRODUCT_DELETE_RESET",Qe="PRODUCT_CREATE_REQUEST",$e="PRODUCT_CREATE_SUCCESS",ze="PRODUCT_CREATE_FAIL",Ve="PRODUCT_CREATE_RESET",Je="PRODUCT_UPDATE_BY_ID_REQUEST",He="PRODUCT_UPDATE_BY_ID_SUCCESS",We="PRODUCT_UPDATE_BY_ID_FAIL",Xe="PRODUCT_UPDATE_BY_ID_RESET",Ke="PRODUCT_CREATE_REVIEW_REQUEST",Ze="PRODUCT_CREATE_REVIEW_SUCCESS",et="PRODUCT_CREATE_REVIEW_FAIL",tt="PRODUCT_CREATE_REVIEW_RESET",at=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var t=Object(m.a)(x.a.mark((function t(a){var r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:De}),t.next=4,ye.a.get("/api/products/".concat(e));case 4:r=t.sent,a({type:Te,payload:r.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:we,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},rt=function(e){return function(){var t=Object(m.a)(x.a.mark((function t(a){var r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Ue}),t.next=4,ye.a.get("/api/products/".concat(e,"/"));case 4:r=t.sent,a({type:Ae,payload:r.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:Be,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},nt=a(126),ct=function(){return Object(p.jsx)(_e.a,{className:"loader text-center",children:Object(p.jsx)(nt.a,{animation:"border",role:"status",style:{height:"100px",width:"100px"},children:Object(p.jsx)("span",{className:"sr-only",children:"Loading..."})})})},st=a(129),it=function(e){var t=e.children,a=e.variant;return Object(p.jsx)(_e.a,{children:Object(p.jsx)(st.a,{variant:a,children:t})})},ot=function(e){var t,a=e.history,n=Object(i.b)(),c=Object(i.c)((function(e){return e.productList})),s=c.products,o=c.loading,l=c.error,d=a.location.search;return Object(r.useEffect)((function(){n(at(d))}),[n,d]),o?t=Object(p.jsx)(ct,{}):l?t=Object(p.jsx)(it,{variant:"danger",children:l}):s&&(t=s.map((function(e){return Object(p.jsx)(_e.a,{sm:9,md:6,lg:3,children:Object(p.jsx)(ke,{product:e})},e._id)}))),Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{className:"text-dark",children:"Latest Products"}),Object(p.jsx)(Ee.a,{children:t})]})},lt=a(127),dt=a(128),jt=a(77),ut=a(75),bt=a(130),pt="CART_ADD_ITEM",ht="CART_REMOVE_ITEM",Ot="SAVE_SHIPPING_ADDRESS",xt="SAVE_PAYMENT_METHOD",mt="CART_CLEAR",ft=function(e,t){return function(){var a=Object(m.a)(x.a.mark((function a(r,n){var c,s;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ye.a.get("/api/products/".concat(e,"/"));case 2:c=a.sent,s=c.data,r({type:pt,payload:{_id:s._id,name:s.name,price:s.price,image:s.image,brand:s.brand,countInStock:s.countInStock,qty:t}}),localStorage.setItem("cart",JSON.stringify(n().cart.cart));case 6:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},gt=function(e){var t=e.match,a=Object(r.useState)(0),n=Object(u.a)(a,2),c=n[0],s=n[1],o=Object(r.useState)(""),l=Object(u.a)(o,2),d=l[0],j=l[1],b=Object(i.b)(),h=parseInt(t.params.id),O=Object(i.c)((function(e){return e.userLogin})).userInfo,f=Object(i.c)((function(e){return e.productDetails})),g=f.product,y=f.loading,v=f.error,S=Object(i.c)((function(e){return e.productReviewCreate})),E=S.loading,_=S.error,C=S.success,N=Object(r.useState)(!1),I=Object(u.a)(N,2),R=I[0],L=I[1];Object(r.useEffect)((function(){g&&g._id===h&&!C||b(rt(h))}),[h,b,g,C]);var k;return y?k=Object(p.jsx)(ct,{}):v?k=Object(p.jsx)(it,{variant:"danger",children:v}):g&&(k=Object(p.jsxs)("div",{children:[Object(p.jsx)(Re.Link,{to:"/",className:"btn btn-light my-3",children:"Go Back"}),Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(_e.a,{sm:8,md:4,children:Object(p.jsx)(lt.a,{src:Le[g._id-5].image,alt:g.name,fluid:!0,thumbnail:!0})}),Object(p.jsx)(_e.a,{md:4,children:Object(p.jsxs)(dt.a,{variant:"flush",children:[Object(p.jsxs)(jt.a,{children:[Object(p.jsx)("h5",{children:Object(p.jsx)("strong",{children:g.brand})}),Object(p.jsx)("h5",{children:g.name})]}),Object(p.jsx)(jt.a,{children:Object(p.jsx)(Ee.a,{children:Object(p.jsx)(_e.a,{children:Object(p.jsx)(Ie,{value:g.rating,text:"".concat(g.numReviews," reviews"),color:"#C39BD3"})})})}),Object(p.jsxs)(jt.a,{children:["Price: ",Object(p.jsxs)("strong",{children:["$",g.price]})]}),Object(p.jsxs)(jt.a,{children:["Description: ",g.description]})]})}),Object(p.jsxs)(_e.a,{md:4,children:[Object(p.jsx)(Ne.a,{children:Object(p.jsxs)(dt.a,{variant:"flush",children:[Object(p.jsx)(jt.a,{children:Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(_e.a,{children:"Price:"}),Object(p.jsxs)(_e.a,{children:["$",g.price]})]})}),Object(p.jsx)(jt.a,{children:Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(_e.a,{children:"Status:"}),Object(p.jsx)(_e.a,{children:g.countInStock>0?"In Stock":"Out of Stock"})]})}),g.countInStock?Object(p.jsx)(jt.a,{children:Object(p.jsx)(Ee.a,{children:Object(p.jsx)(_e.a,{children:Object(p.jsx)(ut.a,{className:"my-2 btn",variant:"dark",type:"button",disabled:0===g.countInStock,block:!0,onClick:function(){return function(){var e=(localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[]).find((function(e){return e._id===h})),t=e?e.qty:0;L(!0),window.setTimeout((function(){L(!1)}),1500),b(ft(h,t+1))}()},children:"Add to Cart"})})})}):""]})}),Object(p.jsx)(st.a,{variant:"success",show:R,children:"Item added to cart!"})]})]}),Object(p.jsx)(Ee.a,{className:"mt-5",children:Object(p.jsxs)(_e.a,{md:6,children:[Object(p.jsx)("h5",{children:"Reviews"}),0===g.reviews.length&&Object(p.jsx)(it,{variant:"info",children:"No Reviews"}),Object(p.jsxs)(dt.a,{variant:"flush",children:[g.reviews.map((function(e){return Object(p.jsxs)(dt.a.Item,{children:[Object(p.jsx)("strong",{children:e.name}),Object(p.jsx)(Ie,{value:e.rating,color:"#C39BD3"}),Object(p.jsx)("p",{children:e.createdAt.substring(0,10)}),Object(p.jsx)("p",{children:e.comment})]},e._id)})),Object(p.jsxs)(dt.a.Item,{children:[Object(p.jsx)("h5",{children:"Write a review"}),E&&Object(p.jsx)(ct,{}),C&&Object(p.jsx)(it,{variant:"success",children:"Review submitted successfully"}),_&&Object(p.jsx)(it,{variant:"danger",children:_}),O?Object(p.jsxs)(bt.a,{onSubmit:function(e){e.preventDefault(),b(function(e,t){return function(){var a=Object(m.a)(x.a.mark((function a(r,n){var c,s,i;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r({type:Ke}),c=n().userLogin.userInfo,a.next=5,ye.a.post("/api/products/".concat(e,"/review/"),t,{headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(c.token)}});case 5:s=a.sent,i=s.data,r({type:Ze,payload:i}),r({type:tt}),r({type:Pe}),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),r({type:et,payload:a.t0.response&&a.t0.response.data.detail?a.t0.response.data.detail:a.t0.message});case 15:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e,t){return a.apply(this,arguments)}}()}(h,{rating:c,comment:d})),s(0),j("")},children:[Object(p.jsxs)(bt.a.Group,{className:"my-2",controlId:"rating",children:[Object(p.jsx)(bt.a.Label,{children:"Rating"}),Object(p.jsxs)(bt.a.Control,{as:"select",value:c,onChange:function(e){return s(e.target.value)},children:[Object(p.jsx)("option",{value:"",children:"Select..."}),Object(p.jsx)("option",{value:"1",children:"1 - Poor"}),Object(p.jsx)("option",{value:"2",children:"2 - Fair"}),Object(p.jsx)("option",{value:"3",children:"3 - Good"}),Object(p.jsx)("option",{value:"4",children:"4 - Very Good"}),Object(p.jsx)("option",{value:"5",children:"5 - Excellent"})]})]}),Object(p.jsxs)(bt.a.Group,{className:"my-2",controlId:"comment",children:[Object(p.jsx)(bt.a.Label,{children:"Review"}),Object(p.jsx)(bt.a.Control,{as:"textarea",row:"4",value:d,onChange:function(e){return j(e.target.value)}})]}),Object(p.jsx)(ut.a,{type:"submit",variant:"dark",children:"Submit"})]}):Object(p.jsxs)(it,{variant:"info",children:["Please ",Object(p.jsx)(Re.Link,{to:"/login",children:"login"})," to write a review"]})]})]})]})})]})),Object(p.jsx)("div",{children:k})},yt=a(52),vt=function(e){var t=e.history,a=Object(i.c)((function(e){return e.cart.cart})),r=Object(i.c)((function(e){return e.userLogin})).userInfo,n=Object(i.b)(),c=function(e){n(function(e){return function(t,a){t({type:ht,payload:{_id:e}}),localStorage.setItem("cart",JSON.stringify(a().cart.cart))}}(e))},s=0!==a.length?Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(_e.a,{md:8,children:Object(p.jsx)(dt.a,{variant:"flush",children:a.map((function(e){return Object(p.jsx)(jt.a,{children:Object(p.jsxs)(Ee.a,{className:"mt-3",children:[Object(p.jsx)(_e.a,{sm:5,md:4,lg:2,children:Object(p.jsx)(j.LinkContainer,{to:"/Product/".concat(e._id),children:Object(p.jsx)(lt.a,{src:"/static".concat(e.image),alt:e.name,fluid:!0})})}),Object(p.jsxs)(_e.a,{sm:3,md:4,lg:3,children:[Object(p.jsx)(Ee.a,{className:"cartItem-brand",children:e.brand}),Object(p.jsx)(Ee.a,{children:e.name})]}),Object(p.jsx)(_e.a,{sm:3,md:4,lg:2,className:"cartItem-brand",children:Object(p.jsxs)("strong",{children:["$",e.price]})}),Object(p.jsxs)(_e.a,{sm:6,md:6,lg:4,children:[Object(p.jsx)(Ee.a,{className:"mx-5",children:Object(p.jsx)(bt.a.Control,{className:"mb-2",as:"select",value:e.qty,onChange:function(t){return n(ft(e._id,parseInt(t.target.value)))},children:Object(yt.a)(Array(e.countInStock).keys()).map((function(e){return Object(p.jsx)("option",{value:e+1,children:e+1},e+1)}))})}),Object(p.jsxs)(Ee.a,{className:"mt-3",children:[Object(p.jsx)(_e.a,{sm:4,md:6,children:Object(p.jsx)("button",{type:"button",className:"btn btn-light mb-2","data-mdb-ripple-color":"dark",children:"LIKE"})}),Object(p.jsx)(_e.a,{className:"verticalLine",sm:4,md:6,children:Object(p.jsx)("button",{type:"button",className:"btn btn-light mb-2","data-mdb-ripple-color":"dark",onClick:function(){c(e._id)},children:"REMOVE"})})]})]})]})},e._id)}))})}),Object(p.jsx)(_e.a,{md:4,children:Object(p.jsx)(Ne.a,{className:"text-dark",children:Object(p.jsxs)(dt.a,{children:[Object(p.jsx)(jt.a,{children:Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(_e.a,{children:"Merchandise Subtotal:"}),Object(p.jsxs)(_e.a,{className:"placeorder-name",children:["$",a.reduce((function(e,t){return e+t.qty*parseFloat(t.price)}),0).toFixed(2)]})]})}),Object(p.jsx)(jt.a,{children:Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(_e.a,{children:"Shipping & Handling:"}),Object(p.jsx)(_e.a,{className:"placeorder-name",children:"TBD"})]})}),Object(p.jsx)(jt.a,{children:Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(_e.a,{children:"GST/HST"}),Object(p.jsx)(_e.a,{className:"placeorder-name",children:"TBD"})]})}),Object(p.jsx)(jt.a,{children:Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(_e.a,{children:Object(p.jsx)("strong",{children:"Estimate Total:"})}),Object(p.jsx)(_e.a,{className:"placeorder-name",children:Object(p.jsxs)("h5",{children:["$",a.reduce((function(e,t){return e+t.qty*parseFloat(t.price)}),0).toFixed(2)]})})]})}),Object(p.jsx)(jt.a,{children:Object(p.jsx)(ut.a,{type:"button",className:"btn-block my-2",disabled:0===a.length,onClick:function(){null===r?t.push("/login"):t.push("/shipping")},children:"Proceed to checkout"})})]})})})]}):Object(p.jsx)(it,{variant:"info",children:"No item in cart"});return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{className:"text-dark mb-4",children:"SHOPPING CART"}),s]})},St=function(e){var t=e.location,a=e.history,n=Object(i.b)(),c=Object(r.useState)(""),s=Object(u.a)(c,2),o=s[0],l=s[1],d=Object(r.useState)(""),j=Object(u.a)(d,2),b=j[0],h=j[1],O=Object(i.c)((function(e){return e.userLogin})),v=O.error,S=O.loading,E=O.userInfo,_=t.search?t.search.split("=")[1]:"/";Object(r.useEffect)((function(){E&&a.push(_)}),[a,_,E]);return Object(p.jsxs)("div",{style:{width:"60%",margin:"auto"},children:[Object(p.jsx)("h1",{className:"mb-4",children:"Sign In"}),S&&Object(p.jsx)(ct,{}),v&&Object(p.jsx)(it,{variant:"danger",children:v}),Object(p.jsxs)(bt.a,{onSubmit:function(e){e.preventDefault(),n(function(e,t){return function(){var a=Object(m.a)(x.a.mark((function a(r){var n,c;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r({type:f}),a.next=4,ye.a.post("/api/users/login",{username:e,password:t},{headers:{"Content-type":"application/json"}});case 4:n=a.sent,c=n.data,r({type:g,payload:c}),localStorage.setItem("userInfo",JSON.stringify(c)),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),r({type:y,payload:a.t0.response&&a.t0.response.data.detail?a.t0.response.data.detail:a.t0.message});case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}(o,b))},children:[Object(p.jsxs)(bt.a.Group,{className:"my-3",controlId:"formBasicEmail",children:[Object(p.jsx)(bt.a.Label,{className:"form-label",children:"Email"}),Object(p.jsx)(bt.a.Control,{value:o,name:"email",onChange:function(e){return l(e.target.value)},type:"text",placeholder:"Enter email",required:!0})]}),Object(p.jsxs)(bt.a.Group,{className:"my-3",controlId:"formBasicPassword",children:[Object(p.jsx)(bt.a.Label,{children:"Password"}),Object(p.jsx)(bt.a.Control,{value:b,onChange:function(e){return h(e.target.value)},type:"password",placeholder:"Password",required:!0})]}),Object(p.jsx)(ut.a,{variant:"primary",type:"submit",children:"Submit"})]}),Object(p.jsx)(Ee.a,{className:"py-3",children:Object(p.jsxs)(_e.a,{children:["New User?",Object(p.jsx)(Re.Link,{className:"mx-2",to:_?"/register?redirect=".concat(_):"/register",children:"Register"})]})})]})},Et=function(e){var t=e.location,a=e.history,n=Object(r.useState)(""),c=Object(u.a)(n,2),s=c[0],o=c[1],l=Object(r.useState)(""),d=Object(u.a)(l,2),j=d[0],b=d[1],h=Object(r.useState)(""),O=Object(u.a)(h,2),f=O[0],y=O[1],v=Object(r.useState)(""),C=Object(u.a)(v,2),N=C[0],I=C[1],R=Object(r.useState)(null),L=Object(u.a)(R,2),k=L[0],D=L[1],T=Object(i.b)(),w=Object(i.c)((function(e){return e.userRegister})),P=w.error,U=w.loading,A=w.userInfo,B=t.search?t.search.split("=")[1]:"/";Object(r.useEffect)((function(){A&&a.push(B)}),[a,B,A]);return Object(p.jsxs)("div",{style:{width:"60%",margin:"auto"},children:[Object(p.jsx)("h1",{className:"mb-4",children:"Sign up with your email address"}),k&&Object(p.jsx)(it,{variant:"warning",children:k}),U&&Object(p.jsx)(ct,{}),P&&Object(p.jsx)(it,{variant:"danger",children:P}),Object(p.jsxs)(bt.a,{onSubmit:function(e){e.preventDefault(),f!==N?D("Passwords not match"):T(function(e,t,a){return function(){var r=Object(m.a)(x.a.mark((function r(n){var c,s;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n({type:S}),r.next=4,ye.a.post("/api/users/register",{username:t,email:t,password:a,first_name:e},{headers:{"Content-type":"application/json"}});case 4:c=r.sent,s=c.data,n({type:E,payload:s}),n({type:g,payload:s}),localStorage.setItem("userInfo",JSON.stringify(s)),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),n({type:_,payload:r.t0.response&&r.t0.response.data.detail?r.t0.response.data.detail:r.t0.message});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(e){return r.apply(this,arguments)}}()}(s,j,f))},children:[Object(p.jsxs)(bt.a.Group,{className:"my-3",controlId:"email",children:[Object(p.jsx)(bt.a.Label,{children:"Email(*)"}),Object(p.jsx)(bt.a.Control,{value:j,name:"email",onChange:function(e){return b(e.target.value)},type:"text",placeholder:"Enter email",required:!0})]}),Object(p.jsxs)(bt.a.Group,{className:"my-3",controlId:"name",children:[Object(p.jsx)(bt.a.Label,{children:"Name"}),Object(p.jsx)(bt.a.Control,{value:s,name:"name",onChange:function(e){return o(e.target.value)},type:"text",placeholder:"Enter name"})]}),Object(p.jsxs)(bt.a.Group,{className:"my-3",controlId:"password",children:[Object(p.jsx)(bt.a.Label,{children:"Create a Password"}),Object(p.jsx)(bt.a.Control,{value:f,onChange:function(e){return y(e.target.value)},type:"password",placeholder:"Password",required:!0})]}),Object(p.jsxs)(bt.a.Group,{className:"my-3",controlId:"passwordConfirm",children:[Object(p.jsx)(bt.a.Label,{children:"Confirm Password"}),Object(p.jsx)(bt.a.Control,{value:N,onChange:function(e){return I(e.target.value)},type:"password",placeholder:"Confirm Password",required:!0})]}),Object(p.jsx)(ut.a,{variant:"primary",type:"submit",children:"Submit"})]}),Object(p.jsx)(Ee.a,{className:"py-3",children:Object(p.jsxs)(_e.a,{children:["Already have an account?",Object(p.jsx)(Re.Link,{className:"mx-2",to:B?"/login?redirect=".concat(B):"/login",children:"Login"})]})})]})},_t=function(e){var t=e.history,a=Object(r.useState)(""),n=Object(u.a)(a,2),c=n[0],o=n[1],l=Object(r.useState)(""),d=Object(u.a)(l,2),j=d[0],b=d[1],h=Object(r.useState)(""),O=Object(u.a)(h,2),f=O[0],y=O[1],v=Object(r.useState)(""),S=Object(u.a)(v,2),E=S[0],_=S[1],C=Object(r.useState)(null),N=Object(u.a)(C,2),I=N[0],R=N[1],w=Object(i.b)(),P=Object(i.c)((function(e){return e.userLogin})).userInfo,U=Object(i.c)((function(e){return e.userProfile})),A=U.user,B=U.loading,F=U.error,G=Object(i.c)((function(e){return e.userUpdateProfile})).success,M=Object(i.c)((function(e){return e.orderList})),q=M.orders,Y=M.loading,Q=M.error;Object(r.useEffect)((function(){P&&P.token?A&&A.id===P.id?q?G?(w({type:T}),w(ve())):(o(A.first_name),b(A.email)):w(function(){var e=Object(m.a)(x.a.mark((function e(t,a){var r,n,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:oe}),r=a().userLogin.userInfo,e.next=5,ye.a.get("/api/orders/list",{headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(r.token)}});case 5:n=e.sent,c=n.data,t({type:le,payload:c}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:de,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()):w(ve()):t.push("/login")}),[w,t,P,A,G,q]);return Object(p.jsx)(s.a,{className:"mt-4",children:Object(p.jsxs)(Ee.a,{children:[Object(p.jsxs)(_e.a,{className:"mx-5",sm:10,md:4,children:[Object(p.jsx)("h4",{children:"Account Information"}),I&&Object(p.jsx)(it,{variant:"warning",children:I}),B&&Object(p.jsx)(ct,{}),F&&Object(p.jsx)(it,{variant:"danger",children:F}),Object(p.jsxs)(bt.a,{onSubmit:function(e){var t;e.preventDefault(),f!==E?R("Password not match"):w((t={name:c,username:j,email:j,password:f},function(){var e=Object(m.a)(x.a.mark((function e(a,r){var n,c,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:L}),n=r().userLogin.userInfo,e.next=5,ye.a.put("/api/users/profile/update",t,{headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(n.token)}});case 5:c=e.sent,s=c.data,a({type:k,payload:s}),a({type:g,payload:s}),localStorage.setItem("userInfo",JSON.stringify(s)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),a({type:D,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,a){return e.apply(this,arguments)}}()))},children:[Object(p.jsxs)(bt.a.Group,{className:"my-2",controlId:"email",children:[Object(p.jsx)(bt.a.Label,{children:"email"}),Object(p.jsx)(bt.a.Control,{value:j,name:"email",onChange:function(e){return b(e.target.value)},type:"text"})]}),Object(p.jsxs)(bt.a.Group,{className:"my-2",controlId:"name",children:[Object(p.jsx)(bt.a.Label,{children:"name"}),Object(p.jsx)(bt.a.Control,{value:c,name:"name",onChange:function(e){return o(e.target.value)},type:"text"})]}),Object(p.jsxs)(bt.a.Group,{className:"my-2",controlId:"password",children:[Object(p.jsx)(bt.a.Label,{children:"Create a password"}),Object(p.jsx)(bt.a.Control,{value:f,onChange:function(e){return y(e.target.value)},type:"password",placeholder:"Password"})]}),Object(p.jsxs)(bt.a.Group,{className:"my-2",controlId:"passwordConfirm",children:[Object(p.jsx)(bt.a.Label,{children:"Confirm Password"}),Object(p.jsx)(bt.a.Control,{value:E,onChange:function(e){return _(e.target.value)},type:"password",placeholder:"Confirm Password"})]}),Object(p.jsx)(ut.a,{className:"my-2",variant:"primary",type:"submit",children:"Update"})]})]}),Object(p.jsxs)(_e.a,{sm:10,md:6,children:[Object(p.jsx)("h4",{children:"Order History"}),Y&&Object(p.jsx)(ct,{}),Q&&Object(p.jsx)(it,{variant:"danger",children:Q}),q&&Object(p.jsxs)(dt.a,{variant:"flush",children:[Object(p.jsx)(jt.a,{children:Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(_e.a,{className:"placeorder-name",children:"Order Date"}),Object(p.jsx)(_e.a,{className:"placeorder-name",children:"Order Number"}),Object(p.jsx)(_e.a,{className:"placeorder-name",children:"Status"}),Object(p.jsx)(_e.a,{className:"placeorder-name",children:"Total Amount"}),Object(p.jsx)(_e.a,{className:"placeorder-name",children:"Order Detail"})]})}),q.map((function(e){return Object(p.jsx)(jt.a,{children:Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(_e.a,{children:e.date}),Object(p.jsx)(_e.a,{children:e._id}),Object(p.jsx)(_e.a,{children:e.isDelivered?"Shipped":"Preparing for shipping"}),Object(p.jsxs)(_e.a,{children:["$",e.totalPrice]}),Object(p.jsxs)(_e.a,{children:[Object(p.jsx)(Re.Link,{to:"/order/".concat(e._id),children:"View Details"})," "]})]})},e._id)}))]})]})]})})},Ct=function(e){var t=e.login,a=e.shipping,r=e.payment,n=e.placeorder;return Object(p.jsxs)(o.a,{className:"flex-column mr-5",children:[t?Object(p.jsx)(j.LinkContainer,{to:"/login",children:Object(p.jsx)(o.a.Link,{children:"Login"})}):Object(p.jsx)(j.LinkContainer,{to:"/login",children:Object(p.jsx)(o.a.Link,{disabled:!0,children:"Login"})}),a?Object(p.jsx)(j.LinkContainer,{to:"/shipping",children:Object(p.jsx)(o.a.Link,{children:"Shipping"})}):Object(p.jsx)(j.LinkContainer,{to:"/shipping",children:Object(p.jsx)(o.a.Link,{disabled:!0,children:"Shipping"})}),r?Object(p.jsx)(j.LinkContainer,{to:"/payment",children:Object(p.jsx)(o.a.Link,{children:"Payment"})}):Object(p.jsx)(j.LinkContainer,{to:"/payment",children:Object(p.jsx)(o.a.Link,{disabled:!0,children:"Payment"})}),n?Object(p.jsx)(j.LinkContainer,{to:"/placeorder",children:Object(p.jsx)(o.a.Link,{children:"Place Order"})}):Object(p.jsx)(j.LinkContainer,{to:"/placeorder",children:Object(p.jsx)(o.a.Link,{disabled:!0,children:"Place Order"})})]})},Nt=function(e){var t=e.history,a=Object(i.c)((function(e){return e.cart})).shipping,n=Object(i.c)((function(e){return e.userLogin})).userInfo,c=Object(r.useState)(a.address),s=Object(u.a)(c,2),o=s[0],l=s[1],d=Object(r.useState)(a.city),j=Object(u.a)(d,2),b=j[0],h=j[1],O=Object(r.useState)(a.province),x=Object(u.a)(O,2),m=x[0],f=x[1],g=Object(r.useState)(a.postcode),y=Object(u.a)(g,2),v=y[0],S=y[1],E=Object(i.b)();null===n&&t.push("/login");return Object(p.jsx)("div",{className:"mt-4",children:Object(p.jsxs)(Ee.a,{className:"justify-content-md-center",children:[Object(p.jsx)(_e.a,{md:2,children:Object(p.jsx)(Ct,{login:!0,shipping:!0})}),Object(p.jsxs)(_e.a,{md:7,children:[Object(p.jsx)("h4",{children:"Shipping"}),Object(p.jsxs)(bt.a,{onSubmit:function(e){var a;e.preventDefault(),E((a={address:o,city:b,province:m,postcode:v},function(e,t){e({type:Ot,payload:a}),localStorage.setItem("shippingDetail",JSON.stringify(a))})),t.push("/payment")},children:[Object(p.jsxs)(bt.a.Group,{className:"my-3",children:[Object(p.jsx)(bt.a.Label,{children:"street address"}),Object(p.jsx)(bt.a.Control,{value:o,name:"address",onChange:function(e){return l(e.target.value)},type:"text",required:!0})]}),Object(p.jsxs)(bt.a.Group,{className:"my-3",children:[Object(p.jsx)(bt.a.Label,{children:"city"}),Object(p.jsx)(bt.a.Control,{value:b,name:"city",onChange:function(e){return h(e.target.value)},type:"text",required:!0})]}),Object(p.jsxs)(bt.a.Group,{className:"my-3",children:[Object(p.jsx)(bt.a.Label,{children:"province"}),Object(p.jsx)("br",{}),Object(p.jsxs)(bt.a.Control,{as:"select",onChange:function(e){return f(e.target.value)},className:"my-1 mr-sm-2",id:"inlineFormCustomSelectProvince",custom:!0,required:!0,value:m,children:[Object(p.jsx)("option",{value:"",children:"Choose..."}),Object(p.jsx)("option",{value:"Alberta",children:"Alberta"}),Object(p.jsx)("option",{value:"British Columbia",children:"British Columbia"}),Object(p.jsx)("option",{value:"Manitoba",children:"Manitoba"}),Object(p.jsx)("option",{value:"New Brunswick",children:"New Brunswick"}),Object(p.jsx)("option",{value:"Newfoundland and Labrador",children:"Newfoundland and Labrador"}),Object(p.jsx)("option",{value:"Northwest Territories",children:"Northwest Territories"}),Object(p.jsx)("option",{value:"Nova Scotia",children:"Nova Scotia"}),Object(p.jsx)("option",{value:"Nunavut",children:"Nunavut"}),Object(p.jsx)("option",{value:"Ontario",children:"Ontario"}),Object(p.jsx)("option",{value:"Prince Edward Island",children:"Prince Edward Island"}),Object(p.jsx)("option",{value:"Quebec",children:"Quebec"}),Object(p.jsx)("option",{value:"Saskatchewan",children:"Saskatchewan"}),Object(p.jsx)("option",{value:"Yukon",children:"Yukon"})]})]}),Object(p.jsxs)(bt.a.Group,{className:"my-3",children:[Object(p.jsx)(bt.a.Label,{children:"postalcode"}),Object(p.jsx)(bt.a.Control,{value:v,onChange:function(e){return S(e.target.value)},type:"text",required:!0})]}),Object(p.jsx)(ut.a,{className:"my-3",variant:"primary",type:"submit",children:"save and next"})]})]})]})})},It=function(e){var t=e.history,a=Object(r.useState)(""),n=Object(u.a)(a,2),c=n[0],o=n[1],l=Object(i.c)((function(e){return e.cart})).shipping,d=Object(r.useState)(!1),j=Object(u.a)(d,2),b=j[0],h=j[1],O=Object(i.b)();l.address||t.push("/shipping");var x=function(e){o(e.target.value)};return Object(p.jsx)(s.a,{className:"mt-4",children:Object(p.jsxs)(Ee.a,{className:"justify-content-md-center",children:[Object(p.jsx)(_e.a,{md:2,children:Object(p.jsx)(Ct,{login:!0,shipping:!0,payment:!0})}),Object(p.jsxs)(_e.a,{md:7,children:[Object(p.jsx)("h4",{className:"mb-4",children:"Payment Method"}),Object(p.jsxs)(bt.a,{onSubmit:function(e){var a;e.preventDefault(),c?(O((a=c,function(e){e({type:xt,payload:a}),localStorage.setItem("paymentMethod",JSON.stringify(a))})),t.push("/placeorder")):(h(!0),window.setTimeout((function(){h(!1)}),2e3))},children:[Object(p.jsx)("div",{className:"radio",children:Object(p.jsxs)("label",{className:"form-check-label",children:[Object(p.jsx)("input",{className:"mx-2",type:"radio",value:"PayPal",checked:"PayPal"===c,onChange:x}),"PayPal",Object(p.jsx)("i",{className:"mx-2 text-info fab fa-cc-paypal"})]})}),Object(p.jsx)("div",{className:"radio",children:Object(p.jsxs)("label",{className:"form-check-label",children:[Object(p.jsx)("input",{className:"mx-2",type:"radio",value:"bitcoin",checked:"bitcoin"===c,onChange:x,disabled:!0}),"Bitcoin",Object(p.jsx)("i",{className:"mx-2 text-warning fab fa-bitcoin"})]})}),Object(p.jsx)(ut.a,{className:"mt-3",variant:"primary",type:"submit",children:"save and next"})]}),Object(p.jsx)(st.a,{variant:"warning",show:b,children:"Please select a payment method."})]})]})})},Rt=(a(70),function(e){var t=e.history,a=Object(i.c)((function(e){return e.orderCreate})),n=a.order,c=a.loading,s=a.error,o=a.success,l=Object(r.useState)(!1),d=Object(u.a)(l,2),b=(d[0],d[1],Object(i.b)()),h=Object(i.c)((function(e){return e.cart})),O=h.shipping,f=h.paymentMethod,g=h.cart,y=Object(i.c)((function(e){return e.userLogin})).userInfo;h.itemsPrice=g.reduce((function(e,t){return e+t.qty*parseFloat(t.price)}),0).toFixed(2),h.shippingPrice=(h.itemsPrice>=100?0:10).toFixed(2),h.taxPrice=Number(.13*h.itemsPrice).toFixed(2),h.totalPrice=(Number(h.itemsPrice)+Number(h.shippingPrice)+Number(h.taxPrice)).toFixed(2),f||t.push("/payment"),null===y&&t.push("/login"),Object(r.useEffect)((function(){o&&(t.push("/order/".concat(n._id)),b({type:Z}))}),[o,t,n]);return Object(p.jsx)("div",{className:"mt-4",children:Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(_e.a,{md:2,children:Object(p.jsx)(Ct,{login:!0,shipping:!0,payment:!0,placeorder:!0})}),Object(p.jsx)(_e.a,{className:"mb-4",md:6,lg:6,children:Object(p.jsxs)(dt.a,{variant:"flush",children:[Object(p.jsxs)(jt.a,{children:[Object(p.jsx)("h2",{className:"mb-2",children:Object(p.jsx)("strong",{children:"Shipping Address"})}),Object(p.jsx)("h5",{children:"Shipping: ".concat(O.address,", ").concat(O.city,", ").concat(O.province," ").concat(O.postcode)})]}),Object(p.jsxs)(jt.a,{children:[Object(p.jsx)("h2",{children:Object(p.jsx)("strong",{children:"Payment Method"})}),Object(p.jsxs)("h5",{children:["Method: ",f]})]}),Object(p.jsxs)(jt.a,{children:[Object(p.jsx)("h2",{className:"mb-2",children:Object(p.jsx)("strong",{children:"Order Detail"})}),Object(p.jsx)(dt.a,{variant:"flush",children:g.map((function(e){return Object(p.jsx)(jt.a,{children:Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(_e.a,{sm:4,md:4,children:Object(p.jsx)(j.LinkContainer,{to:"/Product/".concat(e._id),children:Object(p.jsx)(lt.a,{src:"/static".concat(e.image),alt:e.name,fluid:!0})})}),Object(p.jsx)(_e.a,{className:"placeorder-name",md:4,children:e.name}),Object(p.jsxs)(_e.a,{md:4,children:[e.qty," X $",e.price," = $",(parseFloat(e.price)*e.qty).toFixed(2)]})]})},e._id)}))})]})]})}),Object(p.jsxs)(_e.a,{className:"mx-auto",md:4,lg:4,children:[Object(p.jsx)(Ne.a,{children:Object(p.jsxs)(dt.a,{variant:"flush",children:[Object(p.jsx)(jt.a,{children:Object(p.jsx)(Ee.a,{children:Object(p.jsx)("h2",{className:"m-auto",children:Object(p.jsx)("strong",{children:"Order Summary"})})})}),Object(p.jsx)(jt.a,{children:Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(_e.a,{children:"Items:"}),Object(p.jsxs)(_e.a,{children:["$",h.itemsPrice]})]})}),Object(p.jsx)(jt.a,{children:Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(_e.a,{children:"Shipping:"}),Object(p.jsxs)(_e.a,{children:["$",h.shippingPrice]})]})}),Object(p.jsx)(jt.a,{children:Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(_e.a,{children:"Tax:"}),Object(p.jsxs)(_e.a,{children:["$",h.taxPrice]})]})}),Object(p.jsx)(jt.a,{children:Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(_e.a,{children:"Total:"}),Object(p.jsxs)(_e.a,{className:"placeorder-name",children:["$",h.totalPrice]})]})}),Object(p.jsx)(jt.a,{children:Object(p.jsx)(it,{variant:"warning",children:"PayPal buttons are disabled for live demo."})}),Object(p.jsx)(jt.a,{children:Object(p.jsx)(Ee.a,{children:Object(p.jsx)(_e.a,{children:Object(p.jsx)(ut.a,{className:"btn my-2",variant:"primary",type:"button",block:!0,onClick:function(){b(function(e){return function(){var t=Object(m.a)(x.a.mark((function t(a,r){var n,c,s;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:W}),n=r().userLogin.userInfo,t.next=5,ye.a.post("/api/orders/add",e,{headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(n.token)}});case 5:c=t.sent,s=c.data,a({type:X,payload:s}),a({type:je}),a({type:he}),a({type:mt}),localStorage.removeItem("cart"),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),a({type:K,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e,a){return t.apply(this,arguments)}}()}({orderItems:g,shipping:O,paymentMethod:f,itemsPrice:h.itemsPrice,taxPrice:h.taxPrice,shippingPrice:h.shippingPrice,totalPrice:h.totalPrice,ispaid:!1}))},children:"order now and pay later"})})})})]})}),c&&Object(p.jsx)(ct,{}),s&&Object(p.jsx)(it,{variant:"danger",children:s})]})]})})}),Lt=function(e){var t=e.match,a=e.history,n=parseInt(t.params.id),c=Object(r.useState)(!1),s=Object(u.a)(c,2),o=(s[0],s[1],Object(i.c)((function(e){return e.orderDetail}))),l=o.order,d=o.error,b=o.loading,h=Object(i.c)((function(e){return e.orderPay})),O=(h.loading,h.success,h.error,Object(i.c)((function(e){return e.orderDeliver}))),f=O.success,g=O.error,y=Object(i.b)(),v=Object(i.c)((function(e){return e.userLogin})).userInfo;null===v&&a.push("/login"),Object(r.useEffect)((function(){l&&!f&&n===l._id||y(function(e){return function(){var t=Object(m.a)(x.a.mark((function t(a,r){var n,c,s;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:ee}),n=r().userLogin.userInfo,t.next=5,ye.a.get("/api/orders/".concat(e,"/"),{headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(n.token)}});case 5:c=t.sent,s=c.data,a({type:te,payload:s}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),a({type:ae,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()}(n))}),[l,n,f]);return b?Object(p.jsx)(ct,{}):d?Object(p.jsx)(it,{variant:"danger",children:d}):l?Object(p.jsxs)("div",{className:"mt-4",children:[Object(p.jsx)("h2",{className:"text-dark",children:"Thank you for your order!"}),Object(p.jsxs)("h3",{children:["ORDER NUMBER: ",n]}),Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(_e.a,{className:"mb-4",md:8,lg:6,children:Object(p.jsxs)(dt.a,{variant:"flush",children:[Object(p.jsxs)(jt.a,{children:[Object(p.jsx)("h2",{className:"mb-2",children:Object(p.jsx)("strong",{children:"Shipping address"})}),Object(p.jsx)("h5",{children:"".concat(l.shipping.address,", ").concat(l.shipping.city,", ").concat(l.shipping.province," ").concat(l.shipping.postalCode)}),l.isDelivered?Object(p.jsx)(it,{variant:"success",children:"Your order has been delivered at ".concat(l.deliveredAt)}):Object(p.jsx)(it,{variant:"info",children:"Your order has not been shipped yet"})]}),Object(p.jsxs)(jt.a,{children:[Object(p.jsx)("h2",{className:"mb-2",children:Object(p.jsx)("strong",{children:"Customer contact"})}),Object(p.jsx)("h5",{children:"Customer name: ".concat(l.user.first_name)}),Object(p.jsx)("h5",{children:"Customer email: ".concat(l.user.email)})]}),Object(p.jsxs)(jt.a,{children:[Object(p.jsx)("h2",{children:Object(p.jsx)("strong",{children:"Payment method"})}),Object(p.jsx)("h5",{children:l.paymentMethod}),l.isPaid?Object(p.jsx)(it,{variant:"success",children:"Paid at: ".concat(l.paidAt)}):Object(p.jsx)(it,{variant:"danger",children:"No payment has been made"})]}),Object(p.jsxs)(jt.a,{children:[Object(p.jsx)("h2",{className:"mb-2",children:Object(p.jsx)("strong",{children:"order detail"})}),Object(p.jsx)(dt.a,{variant:"flush",children:l.orderitems.map((function(e){return Object(p.jsx)(jt.a,{children:Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(_e.a,{md:3,sm:4,children:Object(p.jsx)(j.LinkContainer,{to:"/Product/".concat(e.product),children:Object(p.jsx)(lt.a,{src:"/static".concat(e.image),alt:e.name,fluid:!0})})}),Object(p.jsx)(_e.a,{className:"placeorder-name",md:4,children:e.name}),Object(p.jsxs)(_e.a,{md:4,children:[e.qty," X $",e.price," = $",(parseFloat(e.price)*e.qty).toFixed(2)]})]})},e._id)}))})]})]})}),Object(p.jsxs)(_e.a,{className:"mx-auto",sm:10,md:10,lg:5,children:[Object(p.jsx)(Ne.a,{children:Object(p.jsxs)(dt.a,{variant:"flush",children:[Object(p.jsx)(jt.a,{children:Object(p.jsx)(Ee.a,{children:Object(p.jsx)("h2",{className:"m-auto",children:Object(p.jsx)("strong",{children:"order summary"})})})}),Object(p.jsx)(jt.a,{children:Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(_e.a,{children:"Items:"}),Object(p.jsxs)(_e.a,{children:["$",l.itemsPrice]})]})}),Object(p.jsx)(jt.a,{children:Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(_e.a,{children:"Shipping:"}),Object(p.jsxs)(_e.a,{children:["$",l.shippingPrice]})]})}),Object(p.jsx)(jt.a,{children:Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(_e.a,{children:"Tax:"}),Object(p.jsxs)(_e.a,{children:["$",l.taxPrice]})]})}),Object(p.jsx)(jt.a,{children:Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(_e.a,{children:"Total:"}),Object(p.jsxs)(_e.a,{className:"placeorder-name",children:["$",l.totalPrice]})]})}),v.is_staff&&!l.isDelivered&&Object(p.jsx)(jt.a,{children:Object(p.jsx)(Ee.a,{children:Object(p.jsx)(_e.a,{children:Object(p.jsx)(ut.a,{className:"btn my-2",variant:"primary",type:"button",block:!0,onClick:function(){y(function(e){return function(){var t=Object(m.a)(x.a.mark((function t(a,r){var n,c,s;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Oe}),n=r().userLogin.userInfo,t.next=6,ye.a.put("/api/orders/".concat(e,"/deliver/"),!0,{headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(n.token)}});case 6:c=t.sent,s=c.data,a({type:xe,payload:s}),a({type:fe}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),a({type:me,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,a){return t.apply(this,arguments)}}()}(n)),y({type:re}),y({type:he}),y({type:je})},children:"mark as delivered"})})})})]})}),g&&Object(p.jsx)(it,{variant:"danger",children:g}),Object(p.jsx)(jt.a,{children:Object(p.jsx)(it,{variant:"warning",children:"PayPal buttons are disabled for live demo."})}),Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(_e.a,{children:Object(p.jsx)(Re.Link,{to:"/profile",className:"btn btn-dark mx-5 mt-4",children:"my orders"})}),v.is_staff&&Object(p.jsx)(_e.a,{children:Object(p.jsx)(Re.Link,{to:"/admin/orders",className:"btn btn-dark mx-5 mt-4",children:"all orders"})})]})]})]})]}):null},kt=function(e){var t=e.history,a=Object(r.useState)([!1,null,null]),n=Object(u.a)(a,2),c=n[0],s=n[1],o=Object(i.b)(),l=Object(i.c)((function(e){return e.userLogin})).userInfo,d=Object(i.c)((function(e){return e.userList})),j=d.users,b=d.loading,h=d.error,O=Object(i.c)((function(e){return e.userDelete})),f=O.success,g=O.error;Object(r.useEffect)((function(){l&&l.token?l.is_staff&&(j&&!f||o(function(){var e=Object(m.a)(x.a.mark((function e(t,a){var r,n,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:w}),r=a().userLogin.userInfo,e.next=5,ye.a.get("/api/users/",{headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(r.token)}});case 5:n=e.sent,c=n.data,t({type:P,payload:c}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:U,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}())):t.push("/login")}),[o,t,l,j,f]);var y=function(e){var t;o((t=e,function(){var e=Object(m.a)(x.a.mark((function e(a,r){var n,c,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:B}),n=r().userLogin.userInfo,e.next=5,ye.a.delete("/api/users/delete/".concat(t,"/"),{headers:{Authorization:"Bearer ".concat(n.token)}});case 5:c=e.sent,s=c.data,a({type:F,payload:s}),a({type:M}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),a({type:G,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}())),s([!1,null,null])};return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{className:"text-dark mb-4",children:"Users"}),b?Object(p.jsx)(ct,{}):h?Object(p.jsx)(it,{variant:"danger",children:h}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(st.a,{show:c[0],variant:"warning",children:[Object(p.jsxs)(st.a.Heading,{children:["Are you sure to remove user ",c[1]]}),Object(p.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(p.jsx)(ut.a,{className:"mx-3",onClick:function(){return s([!1,null,null])},variant:"outline-success",children:"No"}),Object(p.jsx)(ut.a,{className:"mx-3",onClick:function(){return y(c[2])},variant:"outline-danger",children:"Yes"})]})]}),g&&Object(p.jsx)(it,{variant:"danger",children:g}),Object(p.jsxs)("table",{className:"table table-hover",children:[Object(p.jsx)("thead",{className:"table-dark",children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"col",children:"ID"}),Object(p.jsx)("th",{scope:"col",children:"Name"}),Object(p.jsx)("th",{scope:"col",children:"Email"}),Object(p.jsx)("th",{scope:"col",children:"Staff"}),Object(p.jsx)("th",{scope:"col",children:"Edit"})]})}),Object(p.jsx)("tbody",{children:j&&j.map((function(e){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"row",children:e._id}),Object(p.jsx)("td",{children:e.first_name}),Object(p.jsx)("td",{children:e.email}),Object(p.jsx)("td",{children:e.is_staff?Object(p.jsx)("i",{className:"fas fa-user-check text-success"}):Object(p.jsx)("i",{className:"fas fa-user"})}),Object(p.jsxs)("td",{children:[Object(p.jsx)(Re.Link,{to:"/admin/user/".concat(e._id,"/edit"),className:"btn btn-primary btn-sm",children:Object(p.jsx)("i",{className:"fas fa-edit"})}),Object(p.jsx)(ut.a,{className:"mx-2",variant:"danger",size:"sm",onClick:function(){return s([!0,e.email,e._id])},children:Object(p.jsx)("i",{className:"fas fa-trash-alt"})})]})]},e._id)}))})]})]})]})},Dt=function(e){var t=e.history,a=e.match,n=parseInt(a.params.id),c=Object(r.useState)(""),o=Object(u.a)(c,2),l=o[0],d=o[1],j=Object(r.useState)(""),b=Object(u.a)(j,2),h=b[0],O=b[1],f=Object(r.useState)(!1),g=Object(u.a)(f,2),y=g[0],v=g[1],S=Object(i.b)(),E=Object(i.c)((function(e){return e.userLogin})).userInfo,_=Object(i.c)((function(e){return e.userDetailById})),C=_.user,N=_.loading,I=_.error,R=Object(i.c)((function(e){return e.userUpdateById})),L=R.success,k=R.error;Object(r.useEffect)((function(){E&&E.token?C&&C.id===n?L?(t.push("/admin/users"),S({type:$}),S({type:A})):(d(C.first_name),O(C.email),v(C.is_staff)):S(function(e){return function(){var t=Object(m.a)(x.a.mark((function t(a,r){var n,c,s;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:q}),n=r().userLogin.userInfo,t.next=5,ye.a.get("/api/users/".concat(e,"/"),{headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(n.token)}});case 5:c=t.sent,s=c.data,a({type:Y,payload:s}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),a({type:Q,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()}(n)):t.push("/login")}),[C,S,t,n,E,L]);return Object(p.jsxs)(s.a,{className:"mt-4",children:[Object(p.jsx)("h4",{children:"Edit User"}),k&&Object(p.jsx)(it,{variant:"danger",children:k}),N?Object(p.jsx)(ct,{}):I?Object(p.jsx)(it,{variant:"danger",children:I}):Object(p.jsxs)(bt.a,{onSubmit:function(e){e.preventDefault(),S(function(e,t){return function(){var a=Object(m.a)(x.a.mark((function a(r,n){var c,s,i;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r({type:z}),c=n().userLogin.userInfo,a.next=5,ye.a.put("/api/users/".concat(t,"/update/"),e,{headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(c.token)}});case 5:s=a.sent,i=s.data,r({type:V,payload:i}),r({type:H}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),r({type:J,payload:a.t0.response&&a.t0.response.data.detail?a.t0.response.data.detail:a.t0.message});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e,t){return a.apply(this,arguments)}}()}({name:l,email:h,username:h,is_staff:y},n))},children:[Object(p.jsxs)(bt.a.Group,{className:"my-2",controlId:"email",children:[Object(p.jsx)(bt.a.Label,{children:"email"}),Object(p.jsx)(bt.a.Control,{value:h,name:"email",onChange:function(e){return O(e.target.value)},type:"text"})]}),Object(p.jsxs)(bt.a.Group,{className:"my-2",controlId:"name",children:[Object(p.jsx)(bt.a.Label,{children:"name"}),Object(p.jsx)(bt.a.Control,{value:l,name:"name",onChange:function(e){return d(e.target.value)},type:"text"})]}),Object(p.jsx)(bt.a.Group,{className:"mx-2 my-4",controlId:"is_staff",children:Object(p.jsx)(bt.a.Check,{checked:y,onChange:function(){return v(!y)},type:"checkbox",label:"staff member"})}),Object(p.jsx)(ut.a,{className:"my-3 mx-3",variant:"primary",type:"submit",children:"Update"}),Object(p.jsx)(Re.Link,{to:"/admin/users",className:"btn btn-primary btn-md my-3 mx-5",children:"cancel & go back"})]})]})},Tt=function(e){var t=e.history,a=Object(r.useState)([!1,null,null]),n=Object(u.a)(a,2),c=n[0],s=n[1],o=Object(r.useState)(!1),l=Object(u.a)(o,2),d=l[0],j=l[1],b=Object(r.useState)(""),h=Object(u.a)(b,2),O=h[0],f=h[1],g=Object(r.useState)(""),y=Object(u.a)(g,2),v=y[0],S=y[1],E=Object(r.useState)(""),_=Object(u.a)(E,2),C=_[0],N=_[1],I=Object(r.useState)(""),R=Object(u.a)(I,2),L=R[0],k=R[1],D=Object(r.useState)(0),T=Object(u.a)(D,2),w=T[0],P=T[1],U=Object(r.useState)(0),A=Object(u.a)(U,2),B=A[0],F=A[1],G=Object(r.useState)(null),M=Object(u.a)(G,2),q=M[0],Y=M[1],Q=Object(i.b)(),$=Object(i.c)((function(e){return e.userLogin})).userInfo,z=Object(i.c)((function(e){return e.productList})),V=z.products,J=z.loading,H=z.error,W=Object(i.c)((function(e){return e.productDelete})),X=W.success,K=W.error,Z=Object(i.c)((function(e){return e.productCreate})),ee=Z.success,te=Z.loading,ae=Z.error;Object(r.useEffect)((function(){$&&$.token?$.is_staff&&(!V||X||ee)&&Q(at()):t.push("/login")}),[Q,t,$,V,ee,X]);var re=function(e){var t;Q((t=e,function(){var e=Object(m.a)(x.a.mark((function e(a,r){var n,c,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:Ge}),n=r().userLogin.userInfo,e.next=5,ye.a.delete("/api/products/delete/".concat(t,"/"),{headers:{Authorization:"Bearer ".concat(n.token)}});case 5:c=e.sent,s=c.data,a({type:Me,payload:s}),a({type:Ye}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),a({type:qe,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}())),s([!1,null,null])},ne=function(e){e.preventDefault();var t=new FormData;t.append("user",$.email),t.append("name",O),t.append("brand",v),t.append("category",C),t.append("description",L),t.append("price",w),t.append("countInStock",B),t.append("image",q),t.append("rating",0),Q(function(e){return function(){var t=Object(m.a)(x.a.mark((function t(a,r){var n,c,s;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Qe}),n=r().userLogin.userInfo,t.next=5,ye.a.post("/api/products/add",e,{headers:{"Content-type":"multipart/form-data",Authorization:"Bearer ".concat(n.token)}});case 5:c=t.sent,s=c.data,a({type:$e,payload:s}),a({type:Ve}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:ze,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(t)),j(!1)};return d?Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{className:"text-dark mb-4",children:"Create Product"}),te&&Object(p.jsx)(ct,{}),ae&&Object(p.jsx)(it,{variant:"danger",children:ae}),Object(p.jsxs)(bt.a,{onSubmit:function(e){return ne(e)},children:[Object(p.jsxs)(bt.a.Group,{className:"my-2",controlId:"name",children:[Object(p.jsx)(bt.a.Label,{children:"Name"}),Object(p.jsx)(bt.a.Control,{value:O,name:"name",onChange:function(e){return f(e.target.value)},type:"text",required:!0})]}),Object(p.jsxs)(bt.a.Group,{className:"my-2",controlId:"brand",children:[Object(p.jsx)(bt.a.Label,{children:"Brand"}),Object(p.jsx)(bt.a.Control,{value:v,name:"brand",onChange:function(e){return S(e.target.value)},type:"text",required:!0})]}),Object(p.jsxs)(bt.a.Group,{className:"my-2",controlId:"category",children:[Object(p.jsx)(bt.a.Label,{children:"Category"}),Object(p.jsx)(bt.a.Control,{value:C,name:"category",onChange:function(e){return N(e.target.value)},type:"text",required:!0})]}),Object(p.jsxs)(bt.a.Group,{className:"my-2",controlId:"description",children:[Object(p.jsx)(bt.a.Label,{children:"Description"}),Object(p.jsx)(bt.a.Control,{value:L,name:"description",onChange:function(e){return k(e.target.value)},as:"textarea",rows:3,required:!0})]}),Object(p.jsxs)(bt.a.Group,{className:"my-2",controlId:"price",children:[Object(p.jsx)(bt.a.Label,{children:"Price"}),Object(p.jsx)(bt.a.Control,{value:w,name:"price",onChange:function(e){return P(e.target.value)},type:"number",min:"0",step:"0.01","data-number-to-fixed":"2","data-number-stepfactor":"100",required:!0})]}),Object(p.jsxs)(bt.a.Group,{className:"my-2",controlId:"countInStock",children:[Object(p.jsx)(bt.a.Label,{children:"Number In Stock"}),Object(p.jsx)(bt.a.Control,{value:B,name:"countInStock",onChange:function(e){return F(e.target.value)},min:"0",type:"number",required:!0})]}),Object(p.jsx)(ut.a,{className:"my-4 mx-3",variant:"primary",type:"submit",children:"Create"}),Object(p.jsx)(ut.a,{className:"my-4 mx-3",variant:"primary",onClick:function(){return j(!1)},children:"Cancel"}),Object(p.jsx)(ut.a,{className:"my-4 mx-3",variant:"primary",onClick:function(){f(""),S(""),N(""),k(""),P(0),F(0),Y(null)},children:"Clear Form"})]})]}):Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{className:"text-dark mb-4",children:"Products"}),J?Object(p.jsx)(ct,{}):H?Object(p.jsx)(it,{variant:"danger",children:H}):Object(p.jsxs)("div",{children:[Object(p.jsxs)(st.a,{show:c[0],variant:"warning",children:[Object(p.jsxs)(st.a.Heading,{children:["Are you sure to remove product ",c[1]]}),Object(p.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(p.jsx)(ut.a,{className:"mx-3",onClick:function(){return s([!1,null,null])},variant:"outline-success",children:"No"}),Object(p.jsx)(ut.a,{className:"mx-3",onClick:function(){return re(c[2])},variant:"outline-danger",children:"Yes"})]})]}),Object(p.jsxs)(ut.a,{variant:"primary",size:"md",className:"float-right mb-3",onClick:function(){return j(!0)},children:[Object(p.jsx)("i",{className:"fas fa-plus"})," add new product"]}),K&&Object(p.jsx)(it,{variant:"danger",children:K}),Object(p.jsxs)("table",{className:"table table-hover",children:[Object(p.jsx)("thead",{className:"table-dark",children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"col",children:"ID"}),Object(p.jsx)("th",{scope:"col",children:"Name"}),Object(p.jsx)("th",{scope:"col",children:"Category"}),Object(p.jsx)("th",{scope:"col",children:"Brand"}),Object(p.jsx)("th",{scope:"col",children:"Price"}),Object(p.jsx)("th",{scope:"col",children:"In Stock"}),Object(p.jsx)("th",{scope:"col",children:"Edit"})]})}),Object(p.jsx)("tbody",{children:V&&V.map((function(e){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"row",children:e._id}),Object(p.jsx)("td",{children:e.name}),Object(p.jsx)("td",{children:e.category}),Object(p.jsx)("td",{children:e.brand}),Object(p.jsxs)("td",{children:["$",e.price]}),Object(p.jsx)("td",{children:e.countInStock}),Object(p.jsxs)("td",{children:[Object(p.jsx)(Re.Link,{to:"/admin/product/".concat(e._id,"/edit"),className:"btn btn-primary btn-sm",children:Object(p.jsx)("i",{className:"fas fa-edit"})}),Object(p.jsx)(ut.a,{className:"mx-2",variant:"danger",size:"sm",onClick:function(){return s([!0,e.name,e._id])},children:Object(p.jsx)("i",{className:"fas fa-trash-alt"})})]})]},e._id)}))})]})]})]})},wt=a(38),Pt=function(e){var t,a=e.match,n=e.history,c=parseInt(a.params.id),o=Object(r.useState)(""),l=Object(u.a)(o,2),d=l[0],j=l[1],b=Object(r.useState)(""),h=Object(u.a)(b,2),O=h[0],f=h[1],g=Object(r.useState)(""),y=Object(u.a)(g,2),v=y[0],S=y[1],E=Object(r.useState)(""),_=Object(u.a)(E,2),C=_[0],N=_[1],I=Object(r.useState)(0),R=Object(u.a)(I,2),L=R[0],k=R[1],D=Object(r.useState)(0),T=Object(u.a)(D,2),w=T[0],P=T[1],U=Object(r.useState)(null),A=Object(u.a)(U,2),B=A[0],F=A[1],G=Object(i.b)(),M=Object(i.c)((function(e){return e.userLogin})).userInfo,q=Object(i.c)((function(e){return e.productDetails})),Y=q.product,Q=q.loading,$=q.error,z=Object(i.c)((function(e){return e.productUpdateById})),V=z.success,J=z.error;Object(r.useEffect)((function(){M&&M.token?Y&&Y._id===c?V?(n.push("/admin/products"),G({type:Fe}),G({type:Pe})):(j(Y.name),f(Y.brand),S(Y.category),N(Y.description),k(Y.price),F(Y.image),P(Y.countInStock)):G(rt(c)):n.push("/login")}),[Y,c,G,n,M,V]);return Object(p.jsxs)(s.a,{className:"mt-4",children:[Object(p.jsx)("h4",{children:"Edit Product"}),J&&Object(p.jsx)(it,{variant:"danger",children:J}),Q?Object(p.jsx)(ct,{}):$?Object(p.jsx)(it,{variant:"danger",children:$}):Y?Object(p.jsxs)(bt.a,{onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("user",M.email),t.append("name",d),t.append("brand",O),t.append("category",v),t.append("description",C),t.append("price",L),t.append("countInStock",w),null!==B&&t.append("image",B),G(function(e,t){return function(){var a=Object(m.a)(x.a.mark((function a(r,n){var c,s,i;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r({type:Je}),c=n().userLogin.userInfo,a.next=5,ye.a.put("/api/products/".concat(t,"/update/"),e,{headers:{"Content-type":"multipart/form-data",Authorization:"Bearer ".concat(c.token)}});case 5:s=a.sent,i=s.data,r({type:He,payload:i}),r({type:Xe}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),r({type:We,payload:a.t0.response&&a.t0.response.data.detail?a.t0.response.data.detail:a.t0.message});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e,t){return a.apply(this,arguments)}}()}(t,c))},children:[Object(p.jsxs)(bt.a.Group,{className:"my-2",controlId:"name",children:[Object(p.jsx)(bt.a.Label,{children:"Name"}),Object(p.jsx)(bt.a.Control,{value:d,name:"name",onChange:function(e){return j(e.target.value)},type:"text"})]}),Object(p.jsxs)(bt.a.Group,{className:"my-2",controlId:"brand",children:[Object(p.jsx)(bt.a.Label,{children:"Brand"}),Object(p.jsx)(bt.a.Control,{value:O,name:"brand",onChange:function(e){return f(e.target.value)},type:"text"})]}),Object(p.jsxs)(bt.a.Group,{className:"my-2",controlId:"category",children:[Object(p.jsx)(bt.a.Label,{children:"Category"}),Object(p.jsx)(bt.a.Control,{value:v,name:"category",onChange:function(e){return S(e.target.value)},type:"text"})]}),Object(p.jsxs)(bt.a.Group,(t={className:"my-2"},Object(wt.a)(t,"className","my-4"),Object(wt.a)(t,"children",[Object(p.jsx)(bt.a.Label,{children:"Currently: ".concat(Y.image)}),Object(p.jsx)(bt.a.File,{id:"image",onChange:function(e){F(e.target.files[0])}})]),t)),Object(p.jsxs)(bt.a.Group,{className:"my-2",controlId:"description",children:[Object(p.jsx)(bt.a.Label,{children:"Description"}),Object(p.jsx)(bt.a.Control,{value:C,name:"description",onChange:function(e){return N(e.target.value)},as:"textarea",rows:3})]}),Object(p.jsxs)(bt.a.Group,{className:"my-2",controlId:"price",children:[Object(p.jsx)(bt.a.Label,{children:"Price"}),Object(p.jsx)(bt.a.Control,{value:L,name:"price",onChange:function(e){return k(e.target.value)},type:"number",min:"0",step:"0.01","data-number-to-fixed":"2","data-number-stepfactor":"100"})]}),Object(p.jsxs)(bt.a.Group,{className:"my-2",controlId:"countInStock",children:[Object(p.jsx)(bt.a.Label,{children:"Number In Stock"}),Object(p.jsx)(bt.a.Control,{value:w,name:"countInStock",onChange:function(e){return P(e.target.value)},min:"0",type:"number"})]}),Object(p.jsx)(ut.a,{className:"my-3 mx-5",variant:"primary",type:"submit",children:"Update"}),Object(p.jsx)(Re.Link,{to:"/admin/products",className:"btn btn-primary btn-md my-3 mx-5",children:"cancel & go back"})]}):null]})},Ut=function(e){var t=e.history,a=Object(i.b)(),n=Object(i.c)((function(e){return e.userLogin})).userInfo,c=Object(i.c)((function(e){return e.orderListAdmin})),s=c.orders,o=c.loading,l=c.error;return Object(r.useEffect)((function(){n&&n.token?n.is_staff&&(s||a(function(){var e=Object(m.a)(x.a.mark((function e(t,a){var r,n,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:ue}),r=a().userLogin.userInfo,e.next=5,ye.a.get("/api/orders/admin/list",{headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(r.token)}});case 5:n=e.sent,c=n.data,t({type:be,payload:c}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:pe,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}())):t.push("/login")}),[a,t,n,s]),Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{className:"text-dark mb-4",children:"Orders"}),o?Object(p.jsx)(ct,{}):l?Object(p.jsx)(it,{variant:"danger",children:l}):Object(p.jsxs)("table",{className:"table table-hover",children:[Object(p.jsx)("thead",{className:"table-dark",children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"col",children:"ID"}),Object(p.jsx)("th",{scope:"col",children:"Create Date"}),Object(p.jsx)("th",{scope:"col",children:"Price"}),Object(p.jsx)("th",{scope:"col",children:"Is Paid"}),Object(p.jsx)("th",{scope:"col",children:"Is Shipped"}),Object(p.jsx)("th",{scope:"col"})]})}),Object(p.jsx)("tbody",{children:s&&s.map((function(e){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"row",children:e._id}),Object(p.jsx)("td",{children:e.date}),Object(p.jsxs)("td",{children:["$",e.totalPrice]}),Object(p.jsx)("td",{children:e.isPaid?Object(p.jsx)("span",{className:"text-success",children:e.paidAt.substring(0,10)}):Object(p.jsx)("i",{className:"fas fa-exclamation-circle text-danger"})}),Object(p.jsx)("td",{children:e.isDelivered?Object(p.jsx)("span",{className:"text-success",children:e.deliveredAt.substring(0,10)}):Object(p.jsx)("i",{className:"fas fa-exclamation-circle text-danger"})}),Object(p.jsx)("td",{children:Object(p.jsxs)(Re.Link,{to:"/order/".concat(e._id),children:[Object(p.jsx)("i",{className:"fas fa-angle-double-right"})," Order Detail"]})})]},e._id)}))})]})]})},At=function(){return Object(p.jsxs)(Re.HashRouter,{children:[Object(p.jsx)(Se,{}),Object(p.jsx)("main",{className:"py-3",children:Object(p.jsxs)(s.a,{children:[Object(p.jsx)(b.d,{exact:!0,path:"/",component:ot}),Object(p.jsx)(b.d,{path:"/product/:id",component:gt}),Object(p.jsx)(b.d,{path:"/cart",component:vt}),Object(p.jsx)(b.d,{path:"/login",component:St}),Object(p.jsx)(b.d,{path:"/register",component:Et}),Object(p.jsx)(b.d,{path:"/profile",component:_t}),Object(p.jsx)(b.d,{path:"/shipping",component:Nt}),Object(p.jsx)(b.d,{path:"/payment",component:It}),Object(p.jsx)(b.d,{path:"/placeorder",component:Rt}),Object(p.jsx)(b.d,{path:"/order/:id",component:Lt}),Object(p.jsx)(b.d,{path:"/admin/users",component:kt}),Object(p.jsx)(b.d,{path:"/admin/user/:id/edit",component:Dt}),Object(p.jsx)(b.d,{path:"/admin/products",component:Tt}),Object(p.jsx)(b.d,{path:"/admin/product/:id/edit",component:Pt}),Object(p.jsx)(b.d,{path:"/admin/orders",component:Ut})]})}),Object(p.jsx)(Ce,{})]})},Bt=a(30),Ft=a(78),Gt=a(79),Mt=a(20),qt=localStorage.getItem("shippingDetail")?JSON.parse(localStorage.getItem("shippingDetail")):{},Yt=Object(Bt.combineReducers)({productList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case De:return{loading:!0};case Te:return{loading:!1,products:t.payload};case we:return{loading:!1,error:t.payload};case Pe:return{};default:return e}},productDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ue:return{loading:!0};case Ae:return{loading:!1,product:t.payload};case Be:return{loading:!1,error:t.payload};case Fe:return{};default:return e}},productDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ge:return{loading:!0};case Me:return{loading:!1,success:!0};case qe:return{loading:!1,error:t.payload};case Ye:return{};default:return e}},productCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qe:return{loading:!0};case $e:return{loading:!1,success:!0};case ze:return{loading:!1,error:t.payload};case Ve:return{};default:return e}},productUpdateById:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Je:return{loading:!0};case He:return{loading:!1,success:!0};case We:return{loading:!1,error:t.payload};case Xe:return{};default:return e}},productReviewCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ke:return{loading:!0};case Ze:return{loading:!1,success:!0};case et:return{loading:!1,error:t.payload};case tt:return{};default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pt:var a=e.cart.find((function(e){return e._id===t.payload._id}));return a?Object(Mt.a)(Object(Mt.a)({},e),{},{cart:e.cart.map((function(e){return e._id===a._id?t.payload:e}))}):Object(Mt.a)(Object(Mt.a)({},e),{},{cart:[].concat(Object(yt.a)(e.cart),[t.payload])});case ht:return Object(Mt.a)(Object(Mt.a)({},e),{},{cart:e.cart.filter((function(e){return e._id!==t.payload._id}))});case Ot:return Object(Mt.a)(Object(Mt.a)({},e),{},{shipping:t.payload});case xt:return Object(Mt.a)(Object(Mt.a)({},e),{},{paymentMethod:t.payload});case mt:return{cart:[],shipping:qt};default:return e}},userLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return{loading:!0};case g:return{loading:!1,userInfo:t.payload};case y:return{loading:!1,error:t.payload};case v:return{userInfo:null};default:return e}},userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return{loading:!0};case E:return{loading:!1,userInfo:t.payload};case _:return{loading:!1,error:t.payload};case v:return{};default:return e}},userProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return{loading:!0};case N:return{loading:!1,user:t.payload};case I:return{loading:!1,error:t.payload};case R:return{};default:return e}},userUpdateProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return{loading:!0};case k:return{loading:!1,userInfo:t.payload,success:!0};case D:return{loading:!1,error:t.payload};case T:return{};default:return e}},userList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return{loading:!0};case P:return{loading:!1,users:t.payload};case U:return{loading:!1,error:t.payload};case A:return{};default:return e}},userDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return{loading:!0};case F:return{loading:!1,success:!0};case G:return{loading:!1,error:t.payload};case M:return{};default:return e}},userDetailById:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return{loading:!0};case Y:return{loading:!1,user:t.payload};case Q:return{loading:!1,error:t.payload};case $:return{};default:return e}},userUpdateById:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return{loading:!0};case V:return{loading:!1,success:!0};case J:return{loading:!1,error:t.payload};case H:return{};default:return e}},orderCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return{loading:!0};case X:return{loading:!1,order:t.payload,success:!0};case K:return{loading:!1,error:t.payload};case Z:return{};default:return e}},orderDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return Object(Mt.a)(Object(Mt.a)({},e),{},{loading:!0});case te:return{loading:!1,order:t.payload};case ae:return{loading:!1,error:t.payload};case re:return{};default:return e}},orderPay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ne:return{loading:!0};case ce:return{loading:!1,success:!0};case se:return{loading:!1,error:t.payload};case ie:return{};default:return e}},orderList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:return{orders:[],loading:!0};case le:return{loading:!1,orders:t.payload};case de:return{loading:!1,error:t.payload};case je:return{};default:return e}},orderListAdmin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ue:return{orders:[],loading:!0};case be:return{loading:!1,orders:t.payload};case pe:return{loading:!1,error:t.payload};case he:return{};default:return e}},orderDeliver:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Oe:return{loading:!0};case xe:return{loading:!1,success:!0};case me:return{loading:!1,error:t.payload};case fe:return{};default:return e}}}),Qt=localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null,$t={cart:{cart:localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[],shipping:localStorage.getItem("shippingDetail")?JSON.parse(localStorage.getItem("shippingDetail")):{}},userLogin:{userInfo:Qt}},zt=Object(Gt.composeWithDevTools)(Object(Bt.applyMiddleware)(Ft.a)),Vt=Object(Bt.createStore)(Yt,$t,zt);c.a.render(Object(p.jsx)(i.a,{store:Vt,children:Object(p.jsx)(At,{})}),document.getElementById("root"))},85:function(e,t,a){}},[[118,1,2]]]);
//# sourceMappingURL=main.048a9f7c.chunk.js.map